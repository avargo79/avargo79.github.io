import{a as Y,b as ee}from"./chunk-F6Y6LN5N.js";import{c as J,e as Q,f as X,g as T,i as Z}from"./chunk-C6CP4LLD.js";import{a as q}from"./chunk-EC5LA6IH.js";import{Ab as P,Bb as _,Db as s,Eb as E,Fb as C,Ka as l,Sa as V,Tb as k,Ub as M,Wa as $,a as j,aa as h,b as U,c as v,da as b,ea as w,eb as S,fb as x,hc as G,ib as O,jb as D,ka as u,kb as f,la as p,lb as o,lc as H,mb as r,nb as W,sb as y,sc as L,ua as g,ub as d,wb as c}from"./chunk-IQ6ZNRPZ.js";var I=class a{constructor(e,t,n){this.storage=e;this.fileSystem=t;this.networkService=n;this.setupAutoSave()}AUTO_SAVE_INTERVAL=3e4;autoSaveTimer=null;currentUsername=null;lastSaveTime=g(0);isSaving=g(!1);difficulty=g("normal");setCurrentUser(e){this.currentUsername=e}getDifficulty(){return this.difficulty()}setDifficulty(e){this.difficulty.set(e)}getSaveKey(){if(!this.currentUsername)throw new Error("No user set for save service");return`webos.${this.currentUsername}.gamestate`}setupAutoSave(){typeof window<"u"&&(this.autoSaveTimer=window.setInterval(()=>{this.save()},this.AUTO_SAVE_INTERVAL))}load(){return v(this,null,function*(){if(this.currentUsername)try{let e=yield this.storage.get(this.getSaveKey());e&&this.validateState(e)?(this.fileSystem.deserialize(e.filesystem),this.networkService.deserialize(e.network),e.difficulty&&this.difficulty.set(e.difficulty),this.lastSaveTime.set(e.timestamp)):(this.fileSystem.initializeUserHome(this.currentUsername),this.networkService.reset())}catch(e){console.error("Failed to load game state:",e),this.fileSystem.initializeUserHome(this.currentUsername),this.networkService.reset()}})}save(){return v(this,null,function*(){if(!(this.isSaving()||!this.currentUsername)){this.isSaving.set(!0);try{let e={version:1,timestamp:Date.now(),username:this.currentUsername,player:{credits:1e3,level:1,reputation:0},network:this.networkService.serialize(),filesystem:this.fileSystem.serialize(),missions:{active:[],completed:[]},difficulty:this.difficulty()};yield this.storage.set(this.getSaveKey(),e),this.lastSaveTime.set(e.timestamp)}catch(e){throw console.error("Failed to save game state:",e),e}finally{this.isSaving.set(!1)}}})}reset(){return v(this,null,function*(){this.currentUsername&&(this.fileSystem.initializeUserHome(this.currentUsername),this.networkService.reset(),yield this.storage.remove(this.getSaveKey()),this.lastSaveTime.set(0))})}exportSave(){return v(this,null,function*(){if(!this.currentUsername)throw new Error("No user set for save service");let e={version:1,timestamp:Date.now(),username:this.currentUsername,player:{credits:1e3,level:1,reputation:0},network:this.networkService.serialize(),filesystem:this.fileSystem.serialize(),missions:{active:[],completed:[]},difficulty:this.difficulty()};return JSON.stringify(e,null,2)})}importSave(e){return v(this,null,function*(){try{let t=JSON.parse(e);if(this.validateState(t))this.fileSystem.deserialize(t.filesystem),this.networkService.deserialize(t.network),t.difficulty&&this.difficulty.set(t.difficulty),yield this.save();else throw new Error("Invalid save data")}catch(t){throw console.error("Failed to import save:",t),t}})}validateState(e){if(typeof e!="object"||e===null)return!1;let t=e;return typeof t.version=="number"&&typeof t.timestamp=="number"&&typeof t.username=="string"&&typeof t.player=="object"&&typeof t.network=="string"&&typeof t.filesystem=="string"&&typeof t.missions=="object"}destroy(){this.autoSaveTimer!==null&&(window.clearInterval(this.autoSaveTimer),this.autoSaveTimer=null)}static \u0275fac=function(t){return new(t||a)(b(T),b(H),b(X))};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};var N=class a{constructor(e){this.storage=e}STATE_KEY="tutorial_state";saveState(e){return v(this,null,function*(){let t=this.serializeState(e);yield this.storage.set(this.STATE_KEY,t)})}loadState(){return v(this,null,function*(){let e=yield this.storage.get(this.STATE_KEY);return e?this.deserializeState(e):null})}clearState(){return v(this,null,function*(){yield this.storage.remove(this.STATE_KEY)})}serializeState(e){return{currentSectionId:e.currentSectionId,currentStepId:e.currentStepId,completedSteps:e.completedSteps,skippedSteps:e.skippedSteps,activeHints:Array.from(e.activeHints.entries()),autoAdvanceEnabled:e.autoAdvanceEnabled,autoAdvanceDelay:e.autoAdvanceDelay,sandboxMode:e.sandboxMode,sandboxSnapshot:e.sandboxSnapshot,celebratingMilestone:e.celebratingMilestone,tutorialMode:e.tutorialMode,lastCompletedTimestamp:e.lastCompletedTimestamp,metrics:e.metrics}}deserializeState(e){return{currentSectionId:e.currentSectionId,currentStepId:e.currentStepId,completedSteps:e.completedSteps,skippedSteps:e.skippedSteps,activeHints:new Map(e.activeHints),autoAdvanceEnabled:e.autoAdvanceEnabled,autoAdvanceDelay:e.autoAdvanceDelay,sandboxMode:e.sandboxMode,sandboxSnapshot:e.sandboxSnapshot,celebratingMilestone:e.celebratingMilestone,tutorialMode:e.tutorialMode,lastCompletedTimestamp:e.lastCompletedTimestamp,metrics:e.metrics}}static \u0275fac=function(t){return new(t||a)(b(T))};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};var F=class a{constructor(e){this.storage=e}METRICS_KEY="tutorial_metrics";saveMetrics(e){return v(this,null,function*(){yield this.storage.set(this.METRICS_KEY,e)})}loadMetrics(){return v(this,null,function*(){return yield this.storage.get(this.METRICS_KEY)})}clearMetrics(){return v(this,null,function*(){yield this.storage.remove(this.METRICS_KEY)})}hasCompletedTutorial(){return v(this,null,function*(){let e=yield this.loadMetrics();return e!==null&&e.completionTime!==null})}formatDuration(e){let t=Math.floor(e/1e3),n=Math.floor(t/60),i=Math.floor(n/60);return i>0?`${i}h ${n%60}m`:n>0?`${n}m ${t%60}s`:`${t}s`}calculateCompletionRate(e){let t=e.stepsCompleted+e.stepsSkipped;return t===0?0:Math.round(e.stepsCompleted/t*100)}getPerformanceRating(e){let t=e.completionTime?e.completionTime-e.startTime:0,n=600*1e3,i=e.stepsSkipped/(e.stepsCompleted+e.stepsSkipped),m=e.hintsUsed/e.stepsCompleted;return t<n&&i===0&&m<.5?"excellent":t<n*1.5&&i<.2&&m<1?"good":i<.4&&m<2?"average":"needs-improvement"}static \u0275fac=function(t){return new(t||a)(b(T))};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};var z=class a{constructor(e){this.storage=e;this.loadTheme(),M(()=>{this.applyTheme(this.currentThemeId())})}STORAGE_KEY="webos_theme";currentThemeId=g("ubuntu");themes=g([{id:"ubuntu",name:"Ubuntu",colors:{primary:"#e95420",secondary:"#772953",background:"#2c2c2c",foreground:"#e0e0e0",accent:"#5e2750",success:"#38a169",warning:"#f6ad55",error:"#e53e3e",windowBg:"#300a24",windowBorder:"#5e2750",terminalBg:"#300a24",terminalFg:"#ffffff"}},{id:"dark",name:"Dark",colors:{primary:"#3b82f6",secondary:"#1e3a8a",background:"#0d0d0d",foreground:"#ffffff",accent:"#60a5fa",success:"#10b981",warning:"#f59e0b",error:"#ef4444",windowBg:"#1e1e1e",windowBorder:"#3b82f6",terminalBg:"#000000",terminalFg:"#e0e0e0"}},{id:"light",name:"Light",colors:{primary:"#2563eb",secondary:"#bfdbfe",background:"#fafafa",foreground:"#000000",accent:"#3b82f6",success:"#059669",warning:"#d97706",error:"#dc2626",windowBg:"#ffffff",windowBorder:"#e5e7eb",terminalBg:"#f9fafb",terminalFg:"#1f2937"}},{id:"matrix",name:"Matrix",colors:{primary:"#00ff00",secondary:"#004400",background:"#000000",foreground:"#00ff00",accent:"#00cc00",success:"#00ff00",warning:"#88ff00",error:"#ff0000",windowBg:"#001100",windowBorder:"#00ff00",terminalBg:"#000000",terminalFg:"#00ff00"}},{id:"cyberpunk",name:"Cyberpunk",colors:{primary:"#ff00ff",secondary:"#00ffff",background:"#0a0015",foreground:"#ffffff",accent:"#ff00ff",success:"#00ffff",warning:"#ffff00",error:"#ff0000",windowBg:"#1a0030",windowBorder:"#ff00ff",terminalBg:"#0a0015",terminalFg:"#00ffff"}},{id:"nord",name:"Nord",colors:{primary:"#88c0d0",secondary:"#5e81ac",background:"#2e3440",foreground:"#eceff4",accent:"#81a1c1",success:"#a3be8c",warning:"#ebcb8b",error:"#bf616a",windowBg:"#3b4252",windowBorder:"#4c566a",terminalBg:"#2e3440",terminalFg:"#d8dee9"}}]);loadTheme(){return v(this,null,function*(){try{let e=yield this.storage.get(this.STORAGE_KEY);e&&typeof e=="string"&&this.currentThemeId.set(e)}catch(e){console.warn("Failed to load theme:",e)}})}saveTheme(e){return v(this,null,function*(){try{yield this.storage.set(this.STORAGE_KEY,e)}catch(t){console.warn("Failed to save theme:",t)}})}setTheme(e){this.themes().find(n=>n.id===e)&&(this.currentThemeId.set(e),this.saveTheme(e))}getCurrentTheme(){return this.themes().find(e=>e.id===this.currentThemeId())}applyTheme(e){let t=this.themes().find(m=>m.id===e);if(!t)return;let n=document.documentElement,i=t.colors;n.style.setProperty("--color-primary",i.primary),n.style.setProperty("--color-secondary",i.secondary),n.style.setProperty("--color-background",i.background),n.style.setProperty("--color-foreground",i.foreground),n.style.setProperty("--color-accent",i.accent),n.style.setProperty("--color-success",i.success),n.style.setProperty("--color-warning",i.warning),n.style.setProperty("--color-error",i.error),n.style.setProperty("--color-window-bg",i.windowBg),n.style.setProperty("--color-window-border",i.windowBorder),n.style.setProperty("--color-terminal-bg",i.terminalBg),n.style.setProperty("--color-terminal-fg",i.terminalFg),document.body.setAttribute("data-theme",e)}addCustomTheme(e){this.themes.update(t=>[...t,e])}removeCustomTheme(e){["ubuntu","dark","light","matrix","cyberpunk","nord"].includes(e)||(this.themes.update(n=>n.filter(i=>i.id!==e)),this.currentThemeId()===e&&this.setTheme("ubuntu"))}static \u0275fac=function(t){return new(t||a)(b(T))};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};var B=class a{currentWallpaper=g("linear-gradient(135deg, #2c1674 0%, #1a0f47 100%)");setWallpaper(e){this.currentWallpaper.set(e)}getWallpaper(){return this.currentWallpaper.asReadonly()}static \u0275fac=function(t){return new(t||a)};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};var te=(a,e)=>e.id,oe=(a,e)=>e.action;function ae(a,e){if(a&1){let t=y();o(0,"div",12),d("click",function(){let i=u(t).$implicit,m=c(2);return p(m.selectTheme(i.id))}),o(1,"div",13),W(2,"div",14),o(3,"div",15)(4,"div",16),s(5,"Aa"),r()()(),o(6,"div",17),s(7),r()()}if(a&2){let t=e.$implicit,n=c(2);_("selected",n.selectedTheme()===t.id),f("appTooltip",t.name)("tooltipPosition","bottom"),l(2),P("background",t.colors.primary),l(),P("background",t.colors.background),l(),P("color",t.colors.foreground),l(3),E(t.name)}}function se(a,e){if(a&1){let t=y();o(0,"div",18),d("click",function(){let i=u(t).$implicit,m=c(2);return p(m.selectWallpaper(i.value))}),W(1,"div",19),o(2,"div",20),s(3),r()()}if(a&2){let t=e.$implicit,n=c(2);_("selected",n.selectedWallpaper()===t.value),f("appTooltip",t.name)("tooltipPosition","bottom"),l(),P("background",t.value),l(2),E(t.name)}}function le(a,e){if(a&1&&(o(0,"div",4)(1,"h2"),s(2,"Appearance"),r(),o(3,"div",7)(4,"label"),s(5,"Theme"),r(),o(6,"div",8),O(7,ae,8,11,"div",9,te),r()(),o(9,"div",7)(10,"label"),s(11,"Wallpaper"),r(),o(12,"div",10),O(13,se,4,7,"div",11,te),r()()()),a&2){let t=c();l(7),D(t.themes()),l(6),D(t.wallpaperPresets())}}function ce(a,e){if(a&1){let t=y();o(0,"div",4)(1,"h2"),s(2,"Audio"),r(),o(3,"div",7)(4,"label",21)(5,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleMute())}),r(),s(6," Mute All "),r()(),o(7,"div",7)(8,"label"),s(9),r(),o(10,"input",23),d("input",function(i){u(t);let m=c();return p(m.updateMasterVolume(+i.target.value))}),r()(),o(11,"div",7)(12,"label"),s(13),r(),o(14,"input",23),d("input",function(i){u(t);let m=c();return p(m.updateMusicVolume(+i.target.value))}),r()(),o(15,"div",7)(16,"label"),s(17),r(),o(18,"input",23),d("input",function(i){u(t);let m=c();return p(m.updateSfxVolume(+i.target.value))}),r()()()}if(a&2){let t=c();l(5),f("checked",t.muteAll()),l(4),C("Master Volume: ",t.masterVolume(),"%"),l(),f("value",t.masterVolume())("disabled",t.muteAll()),l(3),C("Music Volume: ",t.musicVolume(),"%"),l(),f("value",t.musicVolume())("disabled",t.muteAll()),l(3),C("SFX Volume: ",t.sfxVolume(),"%"),l(),f("value",t.sfxVolume())("disabled",t.muteAll())}}function de(a,e){if(a&1){let t=y();o(0,"div",7)(1,"label"),s(2),r(),o(3,"input",31),d("input",function(i){u(t);let m=c(2);return p(m.updateAutoSaveInterval(+i.target.value))}),r()()}if(a&2){let t=c(2);l(2),C("Auto Save Interval: ",t.autoSaveInterval()," minutes"),l(),f("value",t.autoSaveInterval())}}function ue(a,e){if(a&1){let t=y();o(0,"div",4)(1,"h2"),s(2,"Gameplay"),r(),o(3,"div",7)(4,"label"),s(5,"Difficulty"),r(),o(6,"div",24)(7,"button",25),d("click",function(){u(t);let i=c();return p(i.setDifficulty("easy"))}),s(8," Easy "),r(),o(9,"button",26),d("click",function(){u(t);let i=c();return p(i.setDifficulty("normal"))}),s(10," Normal "),r(),o(11,"button",27),d("click",function(){u(t);let i=c();return p(i.setDifficulty("hard"))}),s(12," Hard "),r()(),o(13,"p",28),s(14,"Adjusts reward and cost multipliers for gameplay balance"),r()(),o(15,"div",7)(16,"label",21)(17,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleAutoSave())}),r(),s(18," Auto Save "),r()(),S(19,de,4,2,"div",7),o(20,"div",7)(21,"label",21)(22,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleTutorials())}),r(),s(23," Show Tutorials "),r()(),o(24,"div",7)(25,"label",21)(26,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleNotifications())}),r(),s(27," Show Notifications "),r()(),o(28,"h3"),s(29,"Tutorial Settings"),r(),o(30,"div",7)(31,"label"),s(32,"Tutorial Mode"),r(),o(33,"div",24)(34,"button",2),d("click",function(){u(t);let i=c();return p(i.setTutorialMode("full"))}),s(35," Full Tutorial "),r(),o(36,"button",2),d("click",function(){u(t);let i=c();return p(i.setTutorialMode("quick-tips"))}),s(37," Quick Tips Only "),r(),o(38,"button",2),d("click",function(){u(t);let i=c();return p(i.setTutorialMode("disabled"))}),s(39," Disabled "),r()(),o(40,"p",28),s(41,"Full tutorial includes guided steps, Quick tips shows helpful hints, Disabled turns off all tutorial features"),r()(),o(42,"div",7)(43,"label",21)(44,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleTutorialAutoAdvance())}),r(),s(45," Auto-Advance Tutorial Steps "),r(),o(46,"p",28),s(47,"Automatically move to next step after completion"),r()(),o(48,"div",7)(49,"label"),s(50),r(),o(51,"input",29),d("input",function(i){u(t);let m=c();return p(m.updateTutorialAutoAdvanceDelay(+i.target.value))}),r(),o(52,"p",28),s(53,"Time to wait before auto-advancing to next step"),r()(),o(54,"div",7)(55,"button",30),d("click",function(){u(t);let i=c();return p(i.resetTutorialProgress())}),s(56," Reset Tutorial Progress "),r(),o(57,"p",28),s(58,"Clear all tutorial progress and start from the beginning"),r()()()}if(a&2){let t=c();l(7),_("active",t.difficulty()==="easy"),f("appTooltip","Easy: 1.5x rewards, 0.75x costs")("tooltipPosition","bottom"),l(2),_("active",t.difficulty()==="normal"),f("appTooltip","Normal: 1x rewards, 1x costs")("tooltipPosition","bottom"),l(2),_("active",t.difficulty()==="hard"),f("appTooltip","Hard: 0.75x rewards, 1.25x costs")("tooltipPosition","bottom"),l(6),f("checked",t.autoSave()),l(2),x(t.autoSave()?19:-1),l(3),f("checked",t.showTutorials()),l(4),f("checked",t.showNotifications()),l(8),_("active",t.tutorialMode()==="full"),l(2),_("active",t.tutorialMode()==="quick-tips"),l(2),_("active",t.tutorialMode()==="disabled"),l(6),f("checked",t.tutorialAutoAdvance()),l(6),C("Auto-Advance Delay: ",t.tutorialAutoAdvanceDelay(),"s"),l(),f("value",t.tutorialAutoAdvanceDelay())}}function pe(a,e){if(a&1){let t=y();o(0,"div",4)(1,"h2"),s(2,"Accessibility"),r(),o(3,"div",7)(4,"label",21)(5,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleReducedMotion())}),r(),s(6," Reduce Motion "),r(),o(7,"p",28),s(8,"Reduces animations and transitions"),r()(),o(9,"div",7)(10,"label",21)(11,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleHighContrast())}),r(),s(12," High Contrast Mode "),r(),o(13,"p",28),s(14,"Increases contrast for better visibility"),r()(),o(15,"div",7)(16,"label",21)(17,"input",22),d("change",function(){u(t);let i=c();return p(i.toggleScreenReader())}),r(),s(18," Screen Reader Support "),r(),o(19,"p",28),s(20,"Optimizes UI for screen readers"),r()(),o(21,"div",7)(22,"label"),s(23),r(),o(24,"input",32),d("input",function(i){u(t);let m=c();return p(m.updateFontSize(+i.target.value))}),r(),o(25,"p",28),s(26,"Adjusts base font size for all UI elements"),r()()()}if(a&2){let t=c();l(5),f("checked",t.reducedMotion()),l(6),f("checked",t.highContrast()),l(6),f("checked",t.screenReader()),l(6),C("Font Size: ",t.fontSize(),"px"),l(),f("value",t.fontSize())}}function me(a,e){if(a&1){let t=y();o(0,"input",37),d("keydown.enter",function(i){u(t);let m=c().$implicit,R=c(2);return p(R.saveBinding(m.action,i.target.value))})("keydown.escape",function(){u(t);let i=c(3);return p(i.cancelEditBinding())}),r(),o(1,"button",2),d("click",function(i){u(t);let m=c().$implicit,R=c(2);return p(R.saveBinding(m.action,i.target.previousElementSibling.value))}),s(2,"Save"),r(),o(3,"button",2),d("click",function(){u(t);let i=c(3);return p(i.cancelEditBinding())}),s(4,"Cancel"),r()}if(a&2){let t=c().$implicit;f("value",t.keys)}}function ge(a,e){if(a&1){let t=y();o(0,"button",2),d("click",function(){u(t);let i=c(2).$implicit,m=c(2);return p(m.startEditBinding(i.action))}),s(1,"Edit"),r(),o(2,"button",2),d("click",function(){u(t);let i=c(2).$implicit,m=c(2);return p(m.resetBinding(i.action))}),s(3,"Reset"),r()}}function fe(a,e){a&1&&(o(0,"span",39),s(1,"(System)"),r())}function ve(a,e){if(a&1&&(o(0,"span",38),s(1),r(),S(2,ge,4,0)(3,fe,2,0,"span",39)),a&2){let t=c().$implicit;l(),E(t.keys),l(),x(t.editable?2:3)}}function _e(a,e){if(a&1&&(o(0,"div",34)(1,"div",35),s(2),r(),o(3,"div",36),S(4,me,5,1)(5,ve,4,2),r()()),a&2){let t=e.$implicit,n=c(2);l(2),E(t.action),l(2),x(n.editingBinding()===t.action&&t.editable?4:5)}}function he(a,e){if(a&1&&(o(0,"div",4)(1,"h2"),s(2,"Keybindings"),r(),o(3,"div",33),O(4,_e,6,2,"div",34,oe),r()()),a&2){let t=c();l(4),D(t.keybindings())}}var ie=class a{constructor(e,t,n){this.theme=e;this.audio=t;this.wallpaperService=n;this.themes=e.themes,this.selectedTheme=k(()=>e.currentThemeId()),this.selectedWallpaper=n.getWallpaper();let i=this.saveService.getDifficulty();this.difficulty.set(i),M(()=>{this.reducedMotion()?document.body.classList.add("reduced-motion"):document.body.classList.remove("reduced-motion")}),M(()=>{this.highContrast()?document.body.classList.add("high-contrast"):document.body.classList.remove("high-contrast")}),M(()=>{document.documentElement.style.fontSize=`${this.fontSize()}px`})}activeTab=g("appearance");themes;selectedTheme;masterVolume=k(()=>Math.round(this.audio.masterVolume()*100));musicVolume=k(()=>Math.round(this.audio.musicVolume()*100));sfxVolume=k(()=>Math.round(this.audio.sfxVolume()*100));muteAll=k(()=>this.audio.muted());difficulty=g("normal");autoSave=g(!0);autoSaveInterval=g(5);showTutorials=g(!0);showNotifications=g(!0);tutorialMode=g("full");tutorialAutoAdvance=g(!0);tutorialAutoAdvanceDelay=g(3);reducedMotion=g(!1);screenReader=g(!1);highContrast=g(!1);resettingSettings=g(!1);fontSize=g(14);keybindings=g([{action:"Open Terminal",keys:"Ctrl+Alt+T",editable:!0},{action:"Open File Manager",keys:"Super+E",editable:!0},{action:"Open Text Editor",keys:"Ctrl+Alt+E",editable:!0},{action:"Open Task Manager",keys:"Ctrl+Alt+Delete",editable:!0},{action:"Close Window",keys:"Alt+F4",editable:!1},{action:"Minimize Window",keys:"Super+Down",editable:!1},{action:"Maximize Window",keys:"Super+Up",editable:!1},{action:"Screenshot",keys:"Print Screen",editable:!0}]);editingBinding=g(null);wallpaperPresets=g([{id:"default",name:"Default Purple",value:"linear-gradient(135deg, #2c1674 0%, #1a0f47 100%)"},{id:"ocean",name:"Ocean Blue",value:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)"},{id:"sunset",name:"Sunset Orange",value:"linear-gradient(135deg, #ff6b6b 0%, #ffd93d 100%)"},{id:"forest",name:"Forest Green",value:"linear-gradient(135deg, #134e5e 0%, #71b280 100%)"},{id:"night",name:"Dark Night",value:"linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%)"},{id:"aurora",name:"Aurora",value:"linear-gradient(135deg, #00d2ff 0%, #3a47d5 100%)"},{id:"crimson",name:"Crimson",value:"linear-gradient(135deg, #8e0e00 0%, #1f1c18 100%)"},{id:"mint",name:"Mint Fresh",value:"linear-gradient(135deg, #00b4db 0%, #0083b0 100%)"}]);selectedWallpaper;missionService=w(Z);economyService=w(J);saveService=w(I);dialogService=w(ee);notificationService=w(q);tutorialStorageService=w(N);tutorialMetricsService=w(F);setActiveTab(e){this.activeTab.set(e)}selectWallpaper(e){this.wallpaperService.setWallpaper(e),this.audio.playSfx("button_click")}selectTheme(e){this.theme.setTheme(e),this.audio.playSfx("button_click")}updateMasterVolume(e){this.audio.setMasterVolume(e/100)}updateMusicVolume(e){this.audio.setMusicVolume(e/100)}updateSfxVolume(e){this.audio.setSfxVolume(e/100),this.audio.playSfx("button_click")}toggleMute(){this.audio.toggleMute()}setDifficulty(e){this.difficulty.set(e),this.missionService.setGameDifficulty(e),this.economyService.setGameDifficulty(e),this.saveService.setDifficulty(e)}toggleAutoSave(){this.autoSave.update(e=>!e)}updateAutoSaveInterval(e){this.autoSaveInterval.set(e)}toggleTutorials(){this.showTutorials.update(e=>!e)}toggleNotifications(){this.showNotifications.update(e=>!e)}setTutorialMode(e){this.tutorialMode.set(e)}toggleTutorialAutoAdvance(){this.tutorialAutoAdvance.update(e=>!e)}updateTutorialAutoAdvanceDelay(e){this.tutorialAutoAdvanceDelay.set(e)}resetTutorialProgress(){return v(this,null,function*(){(yield this.dialogService.confirm({title:"Reset Tutorial Progress",message:"This will reset all tutorial progress including completed steps, metrics, and achievements. You will start from the beginning. This action cannot be undone.",confirmLabel:"Reset Tutorial",cancelLabel:"Cancel",showDontAskAgain:!1,preferenceKey:""})).confirmed&&(yield this.tutorialStorageService.clearState(),yield this.tutorialMetricsService.clearMetrics(),this.notificationService.success("Tutorial Reset","Tutorial progress has been reset. Restart the tutorial to begin again."))})}toggleReducedMotion(){this.reducedMotion.update(e=>!e)}toggleScreenReader(){this.screenReader.update(e=>!e)}toggleHighContrast(){this.highContrast.update(e=>!e)}updateFontSize(e){this.fontSize.set(e)}startEditBinding(e){this.editingBinding.set(e)}cancelEditBinding(){this.editingBinding.set(null)}saveBinding(e,t){this.keybindings.update(n=>n.map(i=>i.action===e?U(j({},i),{keys:t}):i)),this.editingBinding.set(null)}resetBinding(e){let t={"Open Terminal":"Ctrl+Alt+T","Open File Manager":"Super+E","Open Text Editor":"Ctrl+Alt+E","Open Task Manager":"Ctrl+Alt+Delete",Screenshot:"Print Screen"};t[e]&&this.keybindings.update(n=>n.map(i=>i.action===e?U(j({},i),{keys:t[e]}):i))}resetAllSettings(){return v(this,null,function*(){(yield this.dialogService.confirm({title:"Reset All Settings",message:"This will reset all settings to defaults including theme, audio, keybindings, and preferences. This action cannot be undone.",confirmLabel:"Reset All",cancelLabel:"Cancel",showDontAskAgain:!0,preferenceKey:"reset-settings"})).confirmed&&(this.resettingSettings.set(!0),yield new Promise(t=>setTimeout(t,1e3)),this.theme.setTheme("ubuntu"),this.audio.setMasterVolume(.5),this.audio.setMusicVolume(.6),this.audio.setSfxVolume(.7),this.audio.setMuted(!1),this.difficulty.set("normal"),this.autoSave.set(!0),this.autoSaveInterval.set(5),this.showTutorials.set(!0),this.showNotifications.set(!0),this.reducedMotion.set(!1),this.screenReader.set(!1),this.highContrast.set(!1),this.fontSize.set(14),this.keybindings.set([{action:"Open Terminal",keys:"Ctrl+Alt+T",editable:!0},{action:"Open File Manager",keys:"Super+E",editable:!0},{action:"Open Text Editor",keys:"Ctrl+Alt+E",editable:!0},{action:"Open Task Manager",keys:"Ctrl+Alt+Delete",editable:!0},{action:"Close Window",keys:"Alt+F4",editable:!1},{action:"Minimize Window",keys:"Super+Down",editable:!1},{action:"Maximize Window",keys:"Super+Up",editable:!1},{action:"Screenshot",keys:"Print Screen",editable:!0}]),this.notificationService.success("Settings Reset","All settings have been reset to defaults."),this.resettingSettings.set(!1))})}exportSettings(){return JSON.stringify({theme:this.selectedTheme(),masterVolume:this.masterVolume(),musicVolume:this.musicVolume(),sfxVolume:this.sfxVolume(),muteAll:this.muteAll(),difficulty:this.difficulty(),autoSave:this.autoSave(),autoSaveInterval:this.autoSaveInterval(),showTutorials:this.showTutorials(),showNotifications:this.showNotifications(),reducedMotion:this.reducedMotion(),screenReader:this.screenReader(),highContrast:this.highContrast(),fontSize:this.fontSize(),keybindings:this.keybindings()},null,2)}importSettings(e){try{let t=JSON.parse(e);return t.theme&&this.theme.setTheme(t.theme),t.masterVolume!==void 0&&this.audio.setMasterVolume(t.masterVolume/100),t.musicVolume!==void 0&&this.audio.setMusicVolume(t.musicVolume/100),t.sfxVolume!==void 0&&this.audio.setSfxVolume(t.sfxVolume/100),t.muteAll!==void 0&&this.audio.setMuted(t.muteAll),t.difficulty&&this.difficulty.set(t.difficulty),t.autoSave!==void 0&&this.autoSave.set(t.autoSave),t.autoSaveInterval!==void 0&&this.autoSaveInterval.set(t.autoSaveInterval),t.showTutorials!==void 0&&this.showTutorials.set(t.showTutorials),t.showNotifications!==void 0&&this.showNotifications.set(t.showNotifications),t.reducedMotion!==void 0&&this.reducedMotion.set(t.reducedMotion),t.screenReader!==void 0&&this.screenReader.set(t.screenReader),t.highContrast!==void 0&&this.highContrast.set(t.highContrast),t.fontSize!==void 0&&this.fontSize.set(t.fontSize),t.keybindings&&this.keybindings.set(t.keybindings),!0}catch{return!1}}static \u0275fac=function(t){return new(t||a)(V(z),V(Q),V(B))};static \u0275cmp=$({type:a,selectors:[["app-settings"]],decls:21,vars:17,consts:[[1,"settings"],[1,"tabs"],[3,"click"],[1,"content"],[1,"section"],[1,"footer"],[3,"click","disabled"],[1,"setting-group"],[1,"theme-grid"],[1,"theme-card",3,"selected","appTooltip","tooltipPosition"],[1,"wallpaper-grid"],[1,"wallpaper-card",3,"selected","appTooltip","tooltipPosition"],[1,"theme-card",3,"click","appTooltip","tooltipPosition"],[1,"theme-preview"],[1,"preview-bar"],[1,"preview-content"],[1,"preview-text"],[1,"theme-name"],[1,"wallpaper-card",3,"click","appTooltip","tooltipPosition"],[1,"wallpaper-preview"],[1,"wallpaper-name"],[1,"checkbox-label"],["type","checkbox",3,"change","checked"],["type","range","min","0","max","100",3,"input","value","disabled"],[1,"button-group"],["title","Easy: 1.5x rewards, 0.75x costs",3,"click","appTooltip","tooltipPosition"],["title","Normal: 1x rewards, 1x costs",3,"click","appTooltip","tooltipPosition"],["title","Hard: 0.75x rewards, 1.25x costs",3,"click","appTooltip","tooltipPosition"],[1,"help-text"],["type","range","min","1","max","10",3,"input","value"],[1,"danger-button",3,"click"],["type","range","min","1","max","30",3,"input","value"],["type","range","min","10","max","24",3,"input","value"],[1,"keybindings-list"],[1,"keybinding-row"],[1,"action"],[1,"keys"],["type","text",3,"keydown.enter","keydown.escape","value"],[1,"key-display"],[1,"locked"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),d("click",function(){return n.setActiveTab("appearance")}),s(3," Appearance "),r(),o(4,"button",2),d("click",function(){return n.setActiveTab("audio")}),s(5," Audio "),r(),o(6,"button",2),d("click",function(){return n.setActiveTab("gameplay")}),s(7," Gameplay "),r(),o(8,"button",2),d("click",function(){return n.setActiveTab("accessibility")}),s(9," Accessibility "),r(),o(10,"button",2),d("click",function(){return n.setActiveTab("keybindings")}),s(11," Keybindings "),r()(),o(12,"div",3),S(13,le,15,0,"div",4),S(14,ce,19,10,"div",4),S(15,ue,59,25,"div",4),S(16,pe,27,5,"div",4),S(17,he,6,0,"div",4),r(),o(18,"div",5)(19,"button",6),d("click",function(){return n.resetAllSettings()}),s(20),r()()()),t&2&&(l(2),_("active",n.activeTab()==="appearance"),l(2),_("active",n.activeTab()==="audio"),l(2),_("active",n.activeTab()==="gameplay"),l(2),_("active",n.activeTab()==="accessibility"),l(2),_("active",n.activeTab()==="keybindings"),l(3),x(n.activeTab()==="appearance"?13:-1),l(),x(n.activeTab()==="audio"?14:-1),l(),x(n.activeTab()==="gameplay"?15:-1),l(),x(n.activeTab()==="accessibility"?16:-1),l(),x(n.activeTab()==="keybindings"?17:-1),l(2),f("disabled",n.resettingSettings()),l(),C(" ",n.resettingSettings()?"Resetting...":"Reset All Settings"," "))},dependencies:[G,L,Y],styles:[".settings[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#2c2c2c;color:#e0e0e0;font-family:Ubuntu,sans-serif}.tabs[_ngcontent-%COMP%]{display:flex;background:#3c3c3c;border-bottom:2px solid #555}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:12px 16px;background:transparent;color:#999;border:none;border-bottom:3px solid transparent;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#444;color:#fff}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#2c2c2c;color:#fff;border-bottom-color:#5e2750}.content[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:24px}.section[_ngcontent-%COMP%]{max-width:800px}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:24px;color:#fff}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:32px 0 16px;font-size:18px;color:#e0e0e0;font-weight:600}.setting-group[_ngcontent-%COMP%]{margin-bottom:24px}.setting-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#e0e0e0}.setting-group[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{margin:8px 0 0;font-size:12px;color:#999}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%;height:6px;background:#444;border-radius:3px;outline:none}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:18px;height:18px;background:#5e2750;border-radius:50%;cursor:pointer}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:hover{background:#772953}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:10px 16px;background:#444;color:#e0e0e0;border:1px solid #555;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#555}.button-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#5e2750;border-color:#772953;color:#fff}.theme-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.theme-card[_ngcontent-%COMP%]{padding:12px;background:#333;border:2px solid #444;border-radius:8px;cursor:pointer;transition:all .2s}.theme-card[_ngcontent-%COMP%]:hover{border-color:#555;transform:translateY(-2px)}.theme-card.selected[_ngcontent-%COMP%]{border-color:#5e2750;box-shadow:0 0 0 2px #5e275033}.theme-preview[_ngcontent-%COMP%]{margin-bottom:8px;border-radius:4px;overflow:hidden;border:1px solid #555}.preview-bar[_ngcontent-%COMP%]{height:24px}.preview-content[_ngcontent-%COMP%]{height:60px;display:flex;align-items:center;justify-content:center}.preview-text[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.theme-name[_ngcontent-%COMP%]{text-align:center;font-size:13px;font-weight:500;color:#e0e0e0}.wallpaper-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.wallpaper-card[_ngcontent-%COMP%]{padding:12px;background:#333;border:2px solid #444;border-radius:8px;cursor:pointer;transition:all .2s}.wallpaper-card[_ngcontent-%COMP%]:hover{border-color:#555;transform:translateY(-2px)}.wallpaper-card.selected[_ngcontent-%COMP%]{border-color:#5e2750;box-shadow:0 0 0 2px #5e275033}.wallpaper-preview[_ngcontent-%COMP%]{height:100px;margin-bottom:8px;border-radius:4px;border:1px solid #555}.wallpaper-name[_ngcontent-%COMP%]{text-align:center;font-size:13px;font-weight:500;color:#e0e0e0}.keybindings-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.keybinding-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#333;border:1px solid #444;border-radius:4px}.keybinding-row[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#e0e0e0}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:6px 12px;background:#444;color:#e0e0e0;border:1px solid #555;border-radius:4px;font-size:13px;font-family:Ubuntu Mono,monospace}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:#555;color:#e0e0e0;border:1px solid #666;border-radius:4px;cursor:pointer;font-size:12px}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#666}.keybinding-row[_ngcontent-%COMP%]   .key-display[_ngcontent-%COMP%]{padding:6px 12px;background:#444;color:#e0e0e0;border:1px solid #555;border-radius:4px;font-size:13px;font-family:Ubuntu Mono,monospace}.keybinding-row[_ngcontent-%COMP%]   .locked[_ngcontent-%COMP%]{font-size:12px;color:#999}.danger-button[_ngcontent-%COMP%]{padding:10px 16px;background:#c62828;color:#fff;border:1px solid #b71c1c;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500}.danger-button[_ngcontent-%COMP%]:hover{background:#d32f2f}.danger-button[_ngcontent-%COMP%]:active{background:#b71c1c}.footer[_ngcontent-%COMP%]{padding:16px 24px;background:#3c3c3c;border-top:1px solid #555;display:flex;justify-content:flex-end}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:#902e2e;color:#fff;border:1px solid #a03030;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#a03030}"]})};export{B as a,I as b,N as c,F as d,ie as e};
