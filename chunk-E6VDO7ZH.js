import{a as K,b as X}from"./chunk-OBUK2SCO.js";import{a as q,b as Y,c as N,e as J}from"./chunk-X3KMZRM7.js";import{a as L}from"./chunk-XEXDRVDF.js";import{Ab as _,Cb as l,Db as V,Eb as w,Ja as s,Ra as E,Rb as T,Sb as M,Va as j,a as R,aa as S,b as U,c as h,da as C,db as v,dc as G,ea as k,eb as b,hb as O,hc as $,ib as A,jb as f,ka as p,kb as r,la as g,lb as o,mb as W,oc as H,rb as y,tb as m,ua as u,vb as c,zb as P}from"./chunk-OLBKVZNR.js";var D=class a{constructor(t,e,n){this.storage=t;this.fileSystem=e;this.networkService=n;this.setupAutoSave()}AUTO_SAVE_INTERVAL=3e4;autoSaveTimer=null;currentUsername=null;lastSaveTime=u(0);isSaving=u(!1);difficulty=u("normal");setCurrentUser(t){this.currentUsername=t}getDifficulty(){return this.difficulty()}setDifficulty(t){this.difficulty.set(t)}getSaveKey(){if(!this.currentUsername)throw new Error("No user set for save service");return`webos.${this.currentUsername}.gamestate`}setupAutoSave(){typeof window<"u"&&(this.autoSaveTimer=window.setInterval(()=>{this.save()},this.AUTO_SAVE_INTERVAL))}load(){return h(this,null,function*(){if(this.currentUsername)try{let t=yield this.storage.get(this.getSaveKey());t&&this.validateState(t)?(this.fileSystem.deserialize(t.filesystem),this.networkService.deserialize(t.network),t.difficulty&&this.difficulty.set(t.difficulty),this.lastSaveTime.set(t.timestamp)):(this.fileSystem.initializeUserHome(this.currentUsername),this.networkService.reset())}catch(t){console.error("Failed to load game state:",t),this.fileSystem.initializeUserHome(this.currentUsername),this.networkService.reset()}})}save(){return h(this,null,function*(){if(!(this.isSaving()||!this.currentUsername)){this.isSaving.set(!0);try{let t={version:1,timestamp:Date.now(),username:this.currentUsername,player:{credits:1e3,level:1,reputation:0},network:this.networkService.serialize(),filesystem:this.fileSystem.serialize(),missions:{active:[],completed:[]},difficulty:this.difficulty()};yield this.storage.set(this.getSaveKey(),t),this.lastSaveTime.set(t.timestamp)}catch(t){throw console.error("Failed to save game state:",t),t}finally{this.isSaving.set(!1)}}})}reset(){return h(this,null,function*(){this.currentUsername&&(this.fileSystem.initializeUserHome(this.currentUsername),this.networkService.reset(),yield this.storage.remove(this.getSaveKey()),this.lastSaveTime.set(0))})}exportSave(){return h(this,null,function*(){if(!this.currentUsername)throw new Error("No user set for save service");let t={version:1,timestamp:Date.now(),username:this.currentUsername,player:{credits:1e3,level:1,reputation:0},network:this.networkService.serialize(),filesystem:this.fileSystem.serialize(),missions:{active:[],completed:[]},difficulty:this.difficulty()};return JSON.stringify(t,null,2)})}importSave(t){return h(this,null,function*(){try{let e=JSON.parse(t);if(this.validateState(e))this.fileSystem.deserialize(e.filesystem),this.networkService.deserialize(e.network),e.difficulty&&this.difficulty.set(e.difficulty),yield this.save();else throw new Error("Invalid save data")}catch(e){throw console.error("Failed to import save:",e),e}})}validateState(t){if(typeof t!="object"||t===null)return!1;let e=t;return typeof e.version=="number"&&typeof e.timestamp=="number"&&typeof e.username=="string"&&typeof e.player=="object"&&typeof e.network=="string"&&typeof e.filesystem=="string"&&typeof e.missions=="object"}destroy(){this.autoSaveTimer!==null&&(window.clearInterval(this.autoSaveTimer),this.autoSaveTimer=null)}static \u0275fac=function(e){return new(e||a)(C(N),C($),C(J))};static \u0275prov=S({token:a,factory:a.\u0275fac,providedIn:"root"})};var I=class a{constructor(t){this.storage=t;this.loadTheme(),M(()=>{this.applyTheme(this.currentThemeId())})}STORAGE_KEY="webos_theme";currentThemeId=u("ubuntu");themes=u([{id:"ubuntu",name:"Ubuntu",colors:{primary:"#e95420",secondary:"#772953",background:"#2c2c2c",foreground:"#e0e0e0",accent:"#5e2750",success:"#38a169",warning:"#f6ad55",error:"#e53e3e",windowBg:"#300a24",windowBorder:"#5e2750",terminalBg:"#300a24",terminalFg:"#ffffff"}},{id:"dark",name:"Dark",colors:{primary:"#3b82f6",secondary:"#1e3a8a",background:"#0d0d0d",foreground:"#ffffff",accent:"#60a5fa",success:"#10b981",warning:"#f59e0b",error:"#ef4444",windowBg:"#1e1e1e",windowBorder:"#3b82f6",terminalBg:"#000000",terminalFg:"#e0e0e0"}},{id:"light",name:"Light",colors:{primary:"#2563eb",secondary:"#bfdbfe",background:"#fafafa",foreground:"#000000",accent:"#3b82f6",success:"#059669",warning:"#d97706",error:"#dc2626",windowBg:"#ffffff",windowBorder:"#e5e7eb",terminalBg:"#f9fafb",terminalFg:"#1f2937"}},{id:"matrix",name:"Matrix",colors:{primary:"#00ff00",secondary:"#004400",background:"#000000",foreground:"#00ff00",accent:"#00cc00",success:"#00ff00",warning:"#88ff00",error:"#ff0000",windowBg:"#001100",windowBorder:"#00ff00",terminalBg:"#000000",terminalFg:"#00ff00"}},{id:"cyberpunk",name:"Cyberpunk",colors:{primary:"#ff00ff",secondary:"#00ffff",background:"#0a0015",foreground:"#ffffff",accent:"#ff00ff",success:"#00ffff",warning:"#ffff00",error:"#ff0000",windowBg:"#1a0030",windowBorder:"#ff00ff",terminalBg:"#0a0015",terminalFg:"#00ffff"}},{id:"nord",name:"Nord",colors:{primary:"#88c0d0",secondary:"#5e81ac",background:"#2e3440",foreground:"#eceff4",accent:"#81a1c1",success:"#a3be8c",warning:"#ebcb8b",error:"#bf616a",windowBg:"#3b4252",windowBorder:"#4c566a",terminalBg:"#2e3440",terminalFg:"#d8dee9"}}]);loadTheme(){return h(this,null,function*(){try{let t=yield this.storage.get(this.STORAGE_KEY);t&&typeof t=="string"&&this.currentThemeId.set(t)}catch(t){console.warn("Failed to load theme:",t)}})}saveTheme(t){return h(this,null,function*(){try{yield this.storage.set(this.STORAGE_KEY,t)}catch(e){console.warn("Failed to save theme:",e)}})}setTheme(t){this.themes().find(n=>n.id===t)&&(this.currentThemeId.set(t),this.saveTheme(t))}getCurrentTheme(){return this.themes().find(t=>t.id===this.currentThemeId())}applyTheme(t){let e=this.themes().find(d=>d.id===t);if(!e)return;let n=document.documentElement,i=e.colors;n.style.setProperty("--color-primary",i.primary),n.style.setProperty("--color-secondary",i.secondary),n.style.setProperty("--color-background",i.background),n.style.setProperty("--color-foreground",i.foreground),n.style.setProperty("--color-accent",i.accent),n.style.setProperty("--color-success",i.success),n.style.setProperty("--color-warning",i.warning),n.style.setProperty("--color-error",i.error),n.style.setProperty("--color-window-bg",i.windowBg),n.style.setProperty("--color-window-border",i.windowBorder),n.style.setProperty("--color-terminal-bg",i.terminalBg),n.style.setProperty("--color-terminal-fg",i.terminalFg),document.body.setAttribute("data-theme",t)}addCustomTheme(t){this.themes.update(e=>[...e,t])}removeCustomTheme(t){["ubuntu","dark","light","matrix","cyberpunk","nord"].includes(t)||(this.themes.update(n=>n.filter(i=>i.id!==t)),this.currentThemeId()===t&&this.setTheme("ubuntu"))}static \u0275fac=function(e){return new(e||a)(C(N))};static \u0275prov=S({token:a,factory:a.\u0275fac,providedIn:"root"})};var z=class a{audioContext=null;sfxCache=new Map;ambientPlayer=null;masterVolume=u(.5);sfxVolume=u(.7);musicVolume=u(.6);muted=u(!1);currentTrack=u("none");constructor(){typeof window<"u"&&"AudioContext"in window&&(this.audioContext=new AudioContext,this.ambientPlayer=new Audio,this.ambientPlayer.loop=!0)}setMasterVolume(t){this.masterVolume.set(Math.max(0,Math.min(1,t)))}setSfxVolume(t){this.sfxVolume.set(Math.max(0,Math.min(1,t)))}setMusicVolume(t){this.musicVolume.set(Math.max(0,Math.min(1,t))),this.ambientPlayer&&(this.ambientPlayer.volume=this.getEffectiveMusicVolume())}toggleMute(){this.muted.update(t=>!t),this.ambientPlayer&&(this.ambientPlayer.muted=this.muted())}setMuted(t){this.muted.set(t),this.ambientPlayer&&(this.ambientPlayer.muted=t)}getEffectiveSfxVolume(){return this.muted()?0:this.masterVolume()*this.sfxVolume()}getEffectiveMusicVolume(){return this.muted()?0:this.masterVolume()*this.musicVolume()}playSfx(t){if(!this.audioContext||this.muted())return;let e=this.getSfxFrequency(t),n=this.getSfxDuration(t),i=this.getEffectiveSfxVolume();try{let d=this.audioContext.createOscillator(),x=this.audioContext.createGain();d.connect(x),x.connect(this.audioContext.destination),d.frequency.value=e,d.type=this.getSfxWaveform(t),x.gain.setValueAtTime(i*.3,this.audioContext.currentTime),x.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+n),d.start(this.audioContext.currentTime),d.stop(this.audioContext.currentTime+n)}catch(d){console.warn("Failed to play sound effect:",d)}}getSfxFrequency(t){return{keypress:800,command_success:600,command_error:200,notification:880,window_open:440,window_close:330,button_click:1e3,hack_success:660,hack_fail:180,transfer_complete:523,achievement_unlock:784}[t]}getSfxDuration(t){return{keypress:.05,command_success:.15,command_error:.2,notification:.25,window_open:.1,window_close:.1,button_click:.05,hack_success:.3,hack_fail:.3,transfer_complete:.4,achievement_unlock:.5}[t]}getSfxWaveform(t){return{keypress:"sine",command_success:"sine",command_error:"sawtooth",notification:"sine",window_open:"triangle",window_close:"triangle",button_click:"sine",hack_success:"square",hack_fail:"sawtooth",transfer_complete:"sine",achievement_unlock:"sine"}[t]}playAmbient(t){if(this.ambientPlayer){if(this.currentTrack.set(t),t==="none"){this.ambientPlayer.pause(),this.ambientPlayer.src="";return}this.ambientPlayer.volume=this.getEffectiveMusicVolume(),this.ambientPlayer.muted=this.muted(),this.ambientPlayer.play().catch(e=>{console.warn("Failed to play ambient track:",e)})}}stopAmbient(){this.playAmbient("none")}pauseAmbient(){this.ambientPlayer&&this.ambientPlayer.pause()}resumeAmbient(){this.ambientPlayer&&this.currentTrack()!=="none"&&this.ambientPlayer.play().catch(t=>{console.warn("Failed to resume ambient track:",t)})}static \u0275fac=function(e){return new(e||a)};static \u0275prov=S({token:a,factory:a.\u0275fac,providedIn:"root"})};var B=class a{currentWallpaper=u("linear-gradient(135deg, #2c1674 0%, #1a0f47 100%)");setWallpaper(t){this.currentWallpaper.set(t)}getWallpaper(){return this.currentWallpaper.asReadonly()}static \u0275fac=function(e){return new(e||a)};static \u0275prov=S({token:a,factory:a.\u0275fac,providedIn:"root"})};var Q=(a,t)=>t.id,oe=(a,t)=>t.action;function re(a,t){if(a&1){let e=y();r(0,"div",12),m("click",function(){let i=p(e).$implicit,d=c(2);return g(d.selectTheme(i.id))}),r(1,"div",13),W(2,"div",14),r(3,"div",15)(4,"div",16),l(5,"Aa"),o()()(),r(6,"div",17),l(7),o()()}if(a&2){let e=t.$implicit,n=c(2);_("selected",n.selectedTheme()===e.id),f("appTooltip",e.name)("tooltipPosition","bottom"),s(2),P("background",e.colors.primary),s(),P("background",e.colors.background),s(),P("color",e.colors.foreground),s(3),V(e.name)}}function ae(a,t){if(a&1){let e=y();r(0,"div",18),m("click",function(){let i=p(e).$implicit,d=c(2);return g(d.selectWallpaper(i.value))}),W(1,"div",19),r(2,"div",20),l(3),o()()}if(a&2){let e=t.$implicit,n=c(2);_("selected",n.selectedWallpaper()===e.value),f("appTooltip",e.name)("tooltipPosition","bottom"),s(),P("background",e.value),s(2),V(e.name)}}function se(a,t){if(a&1&&(r(0,"div",4)(1,"h2"),l(2,"Appearance"),o(),r(3,"div",7)(4,"label"),l(5,"Theme"),o(),r(6,"div",8),O(7,re,8,11,"div",9,Q),o()(),r(9,"div",7)(10,"label"),l(11,"Wallpaper"),o(),r(12,"div",10),O(13,ae,4,7,"div",11,Q),o()()()),a&2){let e=c();s(7),A(e.themes()),s(6),A(e.wallpaperPresets())}}function le(a,t){if(a&1){let e=y();r(0,"div",4)(1,"h2"),l(2,"Audio"),o(),r(3,"div",7)(4,"label",21)(5,"input",22),m("change",function(){p(e);let i=c();return g(i.toggleMute())}),o(),l(6," Mute All "),o()(),r(7,"div",7)(8,"label"),l(9),o(),r(10,"input",23),m("input",function(i){p(e);let d=c();return g(d.updateMasterVolume(+i.target.value))}),o()(),r(11,"div",7)(12,"label"),l(13),o(),r(14,"input",23),m("input",function(i){p(e);let d=c();return g(d.updateMusicVolume(+i.target.value))}),o()(),r(15,"div",7)(16,"label"),l(17),o(),r(18,"input",23),m("input",function(i){p(e);let d=c();return g(d.updateSfxVolume(+i.target.value))}),o()()()}if(a&2){let e=c();s(5),f("checked",e.muteAll()),s(4),w("Master Volume: ",e.masterVolume(),"%"),s(),f("value",e.masterVolume())("disabled",e.muteAll()),s(3),w("Music Volume: ",e.musicVolume(),"%"),s(),f("value",e.musicVolume())("disabled",e.muteAll()),s(3),w("SFX Volume: ",e.sfxVolume(),"%"),s(),f("value",e.sfxVolume())("disabled",e.muteAll())}}function ce(a,t){if(a&1){let e=y();r(0,"div",7)(1,"label"),l(2),o(),r(3,"input",29),m("input",function(i){p(e);let d=c(2);return g(d.updateAutoSaveInterval(+i.target.value))}),o()()}if(a&2){let e=c(2);s(2),w("Auto Save Interval: ",e.autoSaveInterval()," minutes"),s(),f("value",e.autoSaveInterval())}}function de(a,t){if(a&1){let e=y();r(0,"div",4)(1,"h2"),l(2,"Gameplay"),o(),r(3,"div",7)(4,"label"),l(5,"Difficulty"),o(),r(6,"div",24)(7,"button",25),m("click",function(){p(e);let i=c();return g(i.setDifficulty("easy"))}),l(8," Easy "),o(),r(9,"button",26),m("click",function(){p(e);let i=c();return g(i.setDifficulty("normal"))}),l(10," Normal "),o(),r(11,"button",27),m("click",function(){p(e);let i=c();return g(i.setDifficulty("hard"))}),l(12," Hard "),o()(),r(13,"p",28),l(14,"Adjusts reward and cost multipliers for gameplay balance"),o()(),r(15,"div",7)(16,"label",21)(17,"input",22),m("change",function(){p(e);let i=c();return g(i.toggleAutoSave())}),o(),l(18," Auto Save "),o()(),v(19,ce,4,2,"div",7),r(20,"div",7)(21,"label",21)(22,"input",22),m("change",function(){p(e);let i=c();return g(i.toggleTutorials())}),o(),l(23," Show Tutorials "),o()(),r(24,"div",7)(25,"label",21)(26,"input",22),m("change",function(){p(e);let i=c();return g(i.toggleNotifications())}),o(),l(27," Show Notifications "),o()()()}if(a&2){let e=c();s(7),_("active",e.difficulty()==="easy"),f("appTooltip","Easy: 1.5x rewards, 0.75x costs")("tooltipPosition","bottom"),s(2),_("active",e.difficulty()==="normal"),f("appTooltip","Normal: 1x rewards, 1x costs")("tooltipPosition","bottom"),s(2),_("active",e.difficulty()==="hard"),f("appTooltip","Hard: 0.75x rewards, 1.25x costs")("tooltipPosition","bottom"),s(6),f("checked",e.autoSave()),s(2),b(e.autoSave()?19:-1),s(3),f("checked",e.showTutorials()),s(4),f("checked",e.showNotifications())}}function ue(a,t){if(a&1){let e=y();r(0,"div",4)(1,"h2"),l(2,"Accessibility"),o(),r(3,"div",7)(4,"label",21)(5,"input",22),m("change",function(){p(e);let i=c();return g(i.toggleReducedMotion())}),o(),l(6," Reduce Motion "),o(),r(7,"p",28),l(8,"Reduces animations and transitions"),o()(),r(9,"div",7)(10,"label",21)(11,"input",22),m("change",function(){p(e);let i=c();return g(i.toggleHighContrast())}),o(),l(12," High Contrast Mode "),o(),r(13,"p",28),l(14,"Increases contrast for better visibility"),o()(),r(15,"div",7)(16,"label",21)(17,"input",22),m("change",function(){p(e);let i=c();return g(i.toggleScreenReader())}),o(),l(18," Screen Reader Support "),o(),r(19,"p",28),l(20,"Optimizes UI for screen readers"),o()(),r(21,"div",7)(22,"label"),l(23),o(),r(24,"input",30),m("input",function(i){p(e);let d=c();return g(d.updateFontSize(+i.target.value))}),o(),r(25,"p",28),l(26,"Adjusts base font size for all UI elements"),o()()()}if(a&2){let e=c();s(5),f("checked",e.reducedMotion()),s(6),f("checked",e.highContrast()),s(6),f("checked",e.screenReader()),s(6),w("Font Size: ",e.fontSize(),"px"),s(),f("value",e.fontSize())}}function me(a,t){if(a&1){let e=y();r(0,"input",35),m("keydown.enter",function(i){p(e);let d=c().$implicit,x=c(2);return g(x.saveBinding(d.action,i.target.value))})("keydown.escape",function(){p(e);let i=c(3);return g(i.cancelEditBinding())}),o(),r(1,"button",2),m("click",function(i){p(e);let d=c().$implicit,x=c(2);return g(x.saveBinding(d.action,i.target.previousElementSibling.value))}),l(2,"Save"),o(),r(3,"button",2),m("click",function(){p(e);let i=c(3);return g(i.cancelEditBinding())}),l(4,"Cancel"),o()}if(a&2){let e=c().$implicit;f("value",e.keys)}}function pe(a,t){if(a&1){let e=y();r(0,"button",2),m("click",function(){p(e);let i=c(2).$implicit,d=c(2);return g(d.startEditBinding(i.action))}),l(1,"Edit"),o(),r(2,"button",2),m("click",function(){p(e);let i=c(2).$implicit,d=c(2);return g(d.resetBinding(i.action))}),l(3,"Reset"),o()}}function ge(a,t){a&1&&(r(0,"span",37),l(1,"(System)"),o())}function fe(a,t){if(a&1&&(r(0,"span",36),l(1),o(),v(2,pe,4,0)(3,ge,2,0,"span",37)),a&2){let e=c().$implicit;s(),V(e.keys),s(),b(e.editable?2:3)}}function he(a,t){if(a&1&&(r(0,"div",32)(1,"div",33),l(2),o(),r(3,"div",34),v(4,me,5,1)(5,fe,4,2),o()()),a&2){let e=t.$implicit,n=c(2);s(2),V(e.action),s(2),b(n.editingBinding()===e.action&&e.editable?4:5)}}function _e(a,t){if(a&1&&(r(0,"div",4)(1,"h2"),l(2,"Keybindings"),o(),r(3,"div",31),O(4,he,6,2,"div",32,oe),o()()),a&2){let e=c();s(4),A(e.keybindings())}}var Z=class a{constructor(t,e,n){this.theme=t;this.audio=e;this.wallpaperService=n;this.themes=t.themes,this.selectedTheme=T(()=>t.currentThemeId()),this.selectedWallpaper=n.getWallpaper();let i=this.saveService.getDifficulty();this.difficulty.set(i),M(()=>{this.reducedMotion()?document.body.classList.add("reduced-motion"):document.body.classList.remove("reduced-motion")}),M(()=>{this.highContrast()?document.body.classList.add("high-contrast"):document.body.classList.remove("high-contrast")}),M(()=>{document.documentElement.style.fontSize=`${this.fontSize()}px`})}activeTab=u("appearance");themes;selectedTheme;masterVolume=T(()=>Math.round(this.audio.masterVolume()*100));musicVolume=T(()=>Math.round(this.audio.musicVolume()*100));sfxVolume=T(()=>Math.round(this.audio.sfxVolume()*100));muteAll=T(()=>this.audio.muted());difficulty=u("normal");autoSave=u(!0);autoSaveInterval=u(5);showTutorials=u(!0);showNotifications=u(!0);reducedMotion=u(!1);screenReader=u(!1);highContrast=u(!1);resettingSettings=u(!1);fontSize=u(14);keybindings=u([{action:"Open Terminal",keys:"Ctrl+Alt+T",editable:!0},{action:"Open File Manager",keys:"Super+E",editable:!0},{action:"Open Text Editor",keys:"Ctrl+Alt+E",editable:!0},{action:"Open Task Manager",keys:"Ctrl+Alt+Delete",editable:!0},{action:"Close Window",keys:"Alt+F4",editable:!1},{action:"Minimize Window",keys:"Super+Down",editable:!1},{action:"Maximize Window",keys:"Super+Up",editable:!1},{action:"Screenshot",keys:"Print Screen",editable:!0}]);editingBinding=u(null);wallpaperPresets=u([{id:"default",name:"Default Purple",value:"linear-gradient(135deg, #2c1674 0%, #1a0f47 100%)"},{id:"ocean",name:"Ocean Blue",value:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)"},{id:"sunset",name:"Sunset Orange",value:"linear-gradient(135deg, #ff6b6b 0%, #ffd93d 100%)"},{id:"forest",name:"Forest Green",value:"linear-gradient(135deg, #134e5e 0%, #71b280 100%)"},{id:"night",name:"Dark Night",value:"linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%)"},{id:"aurora",name:"Aurora",value:"linear-gradient(135deg, #00d2ff 0%, #3a47d5 100%)"},{id:"crimson",name:"Crimson",value:"linear-gradient(135deg, #8e0e00 0%, #1f1c18 100%)"},{id:"mint",name:"Mint Fresh",value:"linear-gradient(135deg, #00b4db 0%, #0083b0 100%)"}]);selectedWallpaper;missionService=k(Y);economyService=k(q);saveService=k(D);dialogService=k(X);notificationService=k(L);setActiveTab(t){this.activeTab.set(t)}selectWallpaper(t){this.wallpaperService.setWallpaper(t),this.audio.playSfx("button_click")}selectTheme(t){this.theme.setTheme(t),this.audio.playSfx("button_click")}updateMasterVolume(t){this.audio.setMasterVolume(t/100)}updateMusicVolume(t){this.audio.setMusicVolume(t/100)}updateSfxVolume(t){this.audio.setSfxVolume(t/100),this.audio.playSfx("button_click")}toggleMute(){this.audio.toggleMute()}setDifficulty(t){this.difficulty.set(t),this.missionService.setGameDifficulty(t),this.economyService.setGameDifficulty(t),this.saveService.setDifficulty(t)}toggleAutoSave(){this.autoSave.update(t=>!t)}updateAutoSaveInterval(t){this.autoSaveInterval.set(t)}toggleTutorials(){this.showTutorials.update(t=>!t)}toggleNotifications(){this.showNotifications.update(t=>!t)}toggleReducedMotion(){this.reducedMotion.update(t=>!t)}toggleScreenReader(){this.screenReader.update(t=>!t)}toggleHighContrast(){this.highContrast.update(t=>!t)}updateFontSize(t){this.fontSize.set(t)}startEditBinding(t){this.editingBinding.set(t)}cancelEditBinding(){this.editingBinding.set(null)}saveBinding(t,e){this.keybindings.update(n=>n.map(i=>i.action===t?U(R({},i),{keys:e}):i)),this.editingBinding.set(null)}resetBinding(t){let e={"Open Terminal":"Ctrl+Alt+T","Open File Manager":"Super+E","Open Text Editor":"Ctrl+Alt+E","Open Task Manager":"Ctrl+Alt+Delete",Screenshot:"Print Screen"};e[t]&&this.keybindings.update(n=>n.map(i=>i.action===t?U(R({},i),{keys:e[t]}):i))}resetAllSettings(){return h(this,null,function*(){(yield this.dialogService.confirm({title:"Reset All Settings",message:"This will reset all settings to defaults including theme, audio, keybindings, and preferences. This action cannot be undone.",confirmLabel:"Reset All",cancelLabel:"Cancel",showDontAskAgain:!0,preferenceKey:"reset-settings"})).confirmed&&(this.resettingSettings.set(!0),yield new Promise(e=>setTimeout(e,1e3)),this.theme.setTheme("ubuntu"),this.audio.setMasterVolume(.5),this.audio.setMusicVolume(.6),this.audio.setSfxVolume(.7),this.audio.setMuted(!1),this.difficulty.set("normal"),this.autoSave.set(!0),this.autoSaveInterval.set(5),this.showTutorials.set(!0),this.showNotifications.set(!0),this.reducedMotion.set(!1),this.screenReader.set(!1),this.highContrast.set(!1),this.fontSize.set(14),this.keybindings.set([{action:"Open Terminal",keys:"Ctrl+Alt+T",editable:!0},{action:"Open File Manager",keys:"Super+E",editable:!0},{action:"Open Text Editor",keys:"Ctrl+Alt+E",editable:!0},{action:"Open Task Manager",keys:"Ctrl+Alt+Delete",editable:!0},{action:"Close Window",keys:"Alt+F4",editable:!1},{action:"Minimize Window",keys:"Super+Down",editable:!1},{action:"Maximize Window",keys:"Super+Up",editable:!1},{action:"Screenshot",keys:"Print Screen",editable:!0}]),this.notificationService.success("Settings Reset","All settings have been reset to defaults."),this.resettingSettings.set(!1))})}exportSettings(){return JSON.stringify({theme:this.selectedTheme(),masterVolume:this.masterVolume(),musicVolume:this.musicVolume(),sfxVolume:this.sfxVolume(),muteAll:this.muteAll(),difficulty:this.difficulty(),autoSave:this.autoSave(),autoSaveInterval:this.autoSaveInterval(),showTutorials:this.showTutorials(),showNotifications:this.showNotifications(),reducedMotion:this.reducedMotion(),screenReader:this.screenReader(),highContrast:this.highContrast(),fontSize:this.fontSize(),keybindings:this.keybindings()},null,2)}importSettings(t){try{let e=JSON.parse(t);return e.theme&&this.theme.setTheme(e.theme),e.masterVolume!==void 0&&this.audio.setMasterVolume(e.masterVolume/100),e.musicVolume!==void 0&&this.audio.setMusicVolume(e.musicVolume/100),e.sfxVolume!==void 0&&this.audio.setSfxVolume(e.sfxVolume/100),e.muteAll!==void 0&&this.audio.setMuted(e.muteAll),e.difficulty&&this.difficulty.set(e.difficulty),e.autoSave!==void 0&&this.autoSave.set(e.autoSave),e.autoSaveInterval!==void 0&&this.autoSaveInterval.set(e.autoSaveInterval),e.showTutorials!==void 0&&this.showTutorials.set(e.showTutorials),e.showNotifications!==void 0&&this.showNotifications.set(e.showNotifications),e.reducedMotion!==void 0&&this.reducedMotion.set(e.reducedMotion),e.screenReader!==void 0&&this.screenReader.set(e.screenReader),e.highContrast!==void 0&&this.highContrast.set(e.highContrast),e.fontSize!==void 0&&this.fontSize.set(e.fontSize),e.keybindings&&this.keybindings.set(e.keybindings),!0}catch{return!1}}static \u0275fac=function(e){return new(e||a)(E(I),E(z),E(B))};static \u0275cmp=j({type:a,selectors:[["app-settings"]],decls:21,vars:17,consts:[[1,"settings"],[1,"tabs"],[3,"click"],[1,"content"],[1,"section"],[1,"footer"],[3,"click","disabled"],[1,"setting-group"],[1,"theme-grid"],[1,"theme-card",3,"selected","appTooltip","tooltipPosition"],[1,"wallpaper-grid"],[1,"wallpaper-card",3,"selected","appTooltip","tooltipPosition"],[1,"theme-card",3,"click","appTooltip","tooltipPosition"],[1,"theme-preview"],[1,"preview-bar"],[1,"preview-content"],[1,"preview-text"],[1,"theme-name"],[1,"wallpaper-card",3,"click","appTooltip","tooltipPosition"],[1,"wallpaper-preview"],[1,"wallpaper-name"],[1,"checkbox-label"],["type","checkbox",3,"change","checked"],["type","range","min","0","max","100",3,"input","value","disabled"],[1,"button-group"],["title","Easy: 1.5x rewards, 0.75x costs",3,"click","appTooltip","tooltipPosition"],["title","Normal: 1x rewards, 1x costs",3,"click","appTooltip","tooltipPosition"],["title","Hard: 0.75x rewards, 1.25x costs",3,"click","appTooltip","tooltipPosition"],[1,"help-text"],["type","range","min","1","max","30",3,"input","value"],["type","range","min","10","max","24",3,"input","value"],[1,"keybindings-list"],[1,"keybinding-row"],[1,"action"],[1,"keys"],["type","text",3,"keydown.enter","keydown.escape","value"],[1,"key-display"],[1,"locked"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),m("click",function(){return n.setActiveTab("appearance")}),l(3," Appearance "),o(),r(4,"button",2),m("click",function(){return n.setActiveTab("audio")}),l(5," Audio "),o(),r(6,"button",2),m("click",function(){return n.setActiveTab("gameplay")}),l(7," Gameplay "),o(),r(8,"button",2),m("click",function(){return n.setActiveTab("accessibility")}),l(9," Accessibility "),o(),r(10,"button",2),m("click",function(){return n.setActiveTab("keybindings")}),l(11," Keybindings "),o()(),r(12,"div",3),v(13,se,15,0,"div",4),v(14,le,19,10,"div",4),v(15,de,28,16,"div",4),v(16,ue,27,5,"div",4),v(17,_e,6,0,"div",4),o(),r(18,"div",5)(19,"button",6),m("click",function(){return n.resetAllSettings()}),l(20),o()()()),e&2&&(s(2),_("active",n.activeTab()==="appearance"),s(2),_("active",n.activeTab()==="audio"),s(2),_("active",n.activeTab()==="gameplay"),s(2),_("active",n.activeTab()==="accessibility"),s(2),_("active",n.activeTab()==="keybindings"),s(3),b(n.activeTab()==="appearance"?13:-1),s(),b(n.activeTab()==="audio"?14:-1),s(),b(n.activeTab()==="gameplay"?15:-1),s(),b(n.activeTab()==="accessibility"?16:-1),s(),b(n.activeTab()==="keybindings"?17:-1),s(2),f("disabled",n.resettingSettings()),s(),w(" ",n.resettingSettings()?"Resetting...":"Reset All Settings"," "))},dependencies:[G,H,K],styles:[".settings[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#2c2c2c;color:#e0e0e0;font-family:Ubuntu,sans-serif}.tabs[_ngcontent-%COMP%]{display:flex;background:#3c3c3c;border-bottom:2px solid #555}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:12px 16px;background:transparent;color:#999;border:none;border-bottom:3px solid transparent;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#444;color:#fff}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#2c2c2c;color:#fff;border-bottom-color:#5e2750}.content[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:24px}.section[_ngcontent-%COMP%]{max-width:800px}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:24px;color:#fff}.setting-group[_ngcontent-%COMP%]{margin-bottom:24px}.setting-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#e0e0e0}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%;height:6px;background:#444;border-radius:3px;outline:none}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:18px;height:18px;background:#5e2750;border-radius:50%;cursor:pointer}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:hover{background:#772953}.setting-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:10px 16px;background:#444;color:#e0e0e0;border:1px solid #555;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#555}.button-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#5e2750;border-color:#772953;color:#fff}.theme-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.theme-card[_ngcontent-%COMP%]{padding:12px;background:#333;border:2px solid #444;border-radius:8px;cursor:pointer;transition:all .2s}.theme-card[_ngcontent-%COMP%]:hover{border-color:#555;transform:translateY(-2px)}.theme-card.selected[_ngcontent-%COMP%]{border-color:#5e2750;box-shadow:0 0 0 2px #5e275033}.theme-preview[_ngcontent-%COMP%]{margin-bottom:8px;border-radius:4px;overflow:hidden;border:1px solid #555}.preview-bar[_ngcontent-%COMP%]{height:24px}.preview-content[_ngcontent-%COMP%]{height:60px;display:flex;align-items:center;justify-content:center}.preview-text[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.theme-name[_ngcontent-%COMP%]{text-align:center;font-size:13px;font-weight:500;color:#e0e0e0}.wallpaper-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.wallpaper-card[_ngcontent-%COMP%]{padding:12px;background:#333;border:2px solid #444;border-radius:8px;cursor:pointer;transition:all .2s}.wallpaper-card[_ngcontent-%COMP%]:hover{border-color:#555;transform:translateY(-2px)}.wallpaper-card.selected[_ngcontent-%COMP%]{border-color:#5e2750;box-shadow:0 0 0 2px #5e275033}.wallpaper-preview[_ngcontent-%COMP%]{height:100px;margin-bottom:8px;border-radius:4px;border:1px solid #555}.wallpaper-name[_ngcontent-%COMP%]{text-align:center;font-size:13px;font-weight:500;color:#e0e0e0}.keybindings-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.keybinding-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#333;border:1px solid #444;border-radius:4px}.keybinding-row[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#e0e0e0}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:6px 12px;background:#444;color:#e0e0e0;border:1px solid #555;border-radius:4px;font-size:13px;font-family:Ubuntu Mono,monospace}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:#555;color:#e0e0e0;border:1px solid #666;border-radius:4px;cursor:pointer;font-size:12px}.keybinding-row[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#666}.keybinding-row[_ngcontent-%COMP%]   .key-display[_ngcontent-%COMP%]{padding:6px 12px;background:#444;color:#e0e0e0;border:1px solid #555;border-radius:4px;font-size:13px;font-family:Ubuntu Mono,monospace}.keybinding-row[_ngcontent-%COMP%]   .locked[_ngcontent-%COMP%]{font-size:12px;color:#999}.footer[_ngcontent-%COMP%]{padding:16px 24px;background:#3c3c3c;border-top:1px solid #555;display:flex;justify-content:flex-end}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:#902e2e;color:#fff;border:1px solid #a03030;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500}.footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#a03030}"]})};export{B as a,D as b,Z as c};
