import{Ab as E,Cb as l,Db as C,Eb as h,Ja as d,Rb as S,Va as z,a as w,b as T,cb as _,db as u,dc as F,ea as O,eb as f,gb as N,hb as k,hc as L,ib as M,ka as g,la as x,nb as r,ob as a,oc as I,rb as v,sb as P,ua as b,ub as s,vb as m,zb as y}from"./chunk-OLBKVZNR.js";var V=(o,e)=>e.id;function W(o,e){o&1&&(r(0,"div",12),l(1,"No files open"),a())}function $(o,e){o&1&&(r(0,"span",20),l(1,"\u25CF"),a())}function j(o,e){if(o&1){let t=v();r(0,"div",18),s("click",function(){let n=g(t).$implicit,c=m(2);return x(c.switchTab(n.id))}),r(1,"span",19),l(2),u(3,$,2,0,"span",20),a(),r(4,"button",21),s("click",function(n){let c=g(t).$implicit;return m(2).closeTab(c.id),x(n.stopPropagation())}),l(5,"\xD7"),a()()}if(o&2){let t=e.$implicit,i=m(2);E("active",t.id===i.activeTabId()),d(2),h(" ",t.filename," "),d(),f(t.modified?3:-1),d(),_("aria-label","Close "+t.filename)}}function U(o,e){if(o&1&&k(0,j,6,5,"div",17,V),o&2){let t=m();M(t.tabs())}}function A(o,e){if(o&1&&(r(0,"div",25),l(1),a()),o&2){let t=e.$implicit;d(),C(t)}}function B(o,e){if(o&1&&(r(0,"div",24),k(1,A,2,1,"div",25,N),a()),o&2){let t=m(2);y("font-size",t.fontSize(),"px"),d(),M(t.lineNumbers())}}function H(o,e){if(o&1){let t=v();r(0,"div",14),u(1,B,3,2,"div",22),r(2,"textarea",23),s("input",function(n){g(t);let c=m();return x(c.updateContent(n.target.value))}),a()()}if(o&2){let t=m();d(),f(t.showLineNumbers()?1:-1),d(),y("font-size",t.fontSize(),"px"),E("word-wrap",t.wordWrap()),P("value",e.content)}}function q(o,e){if(o&1){let t=v();r(0,"div",15)(1,"p"),l(2,"No file selected"),a(),r(3,"button",3),s("click",function(){g(t);let n=m();return x(n.newFile())}),l(4,"Create New File"),a()()}}function G(o,e){o&1&&(r(0,"span",26),l(1,"Modified"),a())}function J(o,e){if(o&1&&(r(0,"span"),l(1),a(),r(2,"span"),l(3),a(),r(4,"span"),l(5),a(),u(6,G,2,0,"span",26)),o&2){let t=e,i=m();d(),C(t.filename),d(2),C(t.language),d(2),h("Lines: ",i.lineNumbers().length),d(),f(t.modified?6:-1)}}var D=class o{fs=O(L);tabs=b([]);activeTabId=b(null);fontSize=b(14);showLineNumbers=b(!0);wordWrap=b(!1);activeTab=S(()=>{let e=this.activeTabId();return e&&this.tabs().find(t=>t.id===e)||null});lineNumbers=S(()=>{let e=this.activeTab();return e?e.content.split(`
`).map((i,n)=>n+1):[]});constructor(){}openFile(e){let t=e.split("/").pop()||e,i=this.tabs().find(p=>p.filepath===e);if(i){this.activeTabId.set(i.id);return}let n=this.fs.readFile(e);if(n===null){console.error(`Failed to read file: ${e}`);return}let c={id:crypto.randomUUID(),filename:t,filepath:e,content:n,modified:!1,language:this.detectLanguage(t)};this.tabs.update(p=>[...p,c]),this.activeTabId.set(c.id)}closeTab(e){let t=this.tabs().find(i=>i.id===e);if(!(t?.modified&&!window.confirm(`${t.filename} has unsaved changes. Close anyway?`))&&(this.tabs.update(i=>i.filter(n=>n.id!==e)),this.activeTabId()===e)){let i=this.tabs();this.activeTabId.set(i.length>0?i[0].id:null)}}switchTab(e){this.activeTabId.set(e)}updateContent(e){let t=this.activeTabId();t&&this.tabs.update(i=>i.map(n=>n.id===t?T(w({},n),{content:e,modified:!0}):n))}saveFile(){let e=this.activeTab();if(!e)return;if(!this.fs.writeFile(e.filepath,e.content)){console.error(`Failed to save file: ${e.filepath}`);return}this.tabs.update(i=>i.map(n=>n.id===e.id?T(w({},n),{modified:!1}):n))}newFile(){let e=this.tabs().filter(n=>n.filename.startsWith("untitled")).length,i=`/tmp/${e===0?"untitled.txt":`untitled-${e+1}.txt`}`;this.fs.writeFile(i,""),this.openFile(i)}detectLanguage(e){switch(e.split(".").pop()?.toLowerCase()){case"js":return"javascript";case"ts":return"typescript";case"html":return"html";case"css":return"css";case"scss":return"scss";case"json":return"json";case"md":return"markdown";case"py":return"python";default:return"text"}}increaseFontSize(){this.fontSize.update(e=>Math.min(32,e+2))}decreaseFontSize(){this.fontSize.update(e=>Math.max(8,e-2))}toggleLineNumbers(){this.showLineNumbers.update(e=>!e)}toggleWordWrap(){this.wordWrap.update(e=>!e)}getHighlightedContent(e,t){return e}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=z({type:o,selectors:[["app-text-editor"]],decls:26,vars:15,consts:[[1,"text-editor"],[1,"toolbar"],[1,"file-actions"],[1,"btn",3,"click"],[1,"btn",3,"click","disabled"],[1,"view-actions"],["title","Decrease font size",1,"btn-icon",3,"click"],[1,"font-size-display"],["title","Increase font size",1,"btn-icon",3,"click"],["title","Toggle line numbers",1,"btn-icon",3,"click"],["title","Toggle word wrap",1,"btn-icon",3,"click"],[1,"tabs"],[1,"no-tabs"],[1,"editor-container"],[1,"editor-wrapper"],[1,"no-file"],[1,"statusbar"],[1,"tab",3,"active"],[1,"tab",3,"click"],[1,"tab-name"],[1,"modified-indicator"],[1,"tab-close",3,"click"],[1,"line-numbers",3,"font-size"],["spellcheck","false","autocomplete","off",1,"editor",3,"input","value"],[1,"line-numbers"],[1,"line-number"],[1,"modified"]],template:function(t,i){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),s("click",function(){return i.newFile()}),l(4,"New"),a(),r(5,"button",4),s("click",function(){return i.saveFile()}),l(6,"Save"),a()(),r(7,"div",5)(8,"button",6),s("click",function(){return i.decreaseFontSize()}),l(9,"A-"),a(),r(10,"span",7),l(11),a(),r(12,"button",8),s("click",function(){return i.increaseFontSize()}),l(13,"A+"),a(),r(14,"button",9),s("click",function(){return i.toggleLineNumbers()}),l(15," # "),a(),r(16,"button",10),s("click",function(){return i.toggleWordWrap()}),l(17," \u23CE "),a()()(),r(18,"div",11),u(19,W,2,0,"div",12)(20,U,2,0),a(),r(21,"div",13),u(22,H,3,6,"div",14)(23,q,5,0,"div",15),a(),r(24,"div",16),u(25,J,7,4),a()()),t&2){let n,c,p;d(5),P("disabled",!((n=i.activeTab())!=null&&n.modified)),d(3),_("aria-label","Decrease font size"),d(3),h("",i.fontSize(),"px"),d(),_("aria-label","Increase font size"),d(2),E("active",i.showLineNumbers()),_("aria-label","Toggle line numbers")("aria-pressed",i.showLineNumbers()),d(2),E("active",i.wordWrap()),_("aria-label","Toggle word wrap")("aria-pressed",i.wordWrap()),d(3),f(i.tabs().length===0?19:20),d(3),f((c=i.activeTab())?22:23,c),d(3),f((p=i.activeTab())?25:-1,p)}},dependencies:[F,I],styles:[".text-editor[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#f5f5f5;font-family:Ubuntu,sans-serif}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px;background:#fff;border-bottom:1px solid #ddd;gap:12px}.file-actions[_ngcontent-%COMP%], .view-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.btn[_ngcontent-%COMP%]{padding:6px 16px;background:#fff;border:1px solid #ddd;border-radius:4px;cursor:pointer;font-size:14px}.btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f0f0f0}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-icon[_ngcontent-%COMP%]{padding:6px 10px;background:#fff;border:1px solid #ddd;border-radius:4px;cursor:pointer;font-size:14px}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0}.btn-icon.active[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#06c}.font-size-display[_ngcontent-%COMP%]{font-size:12px;color:#666;min-width:40px;text-align:center}.tabs[_ngcontent-%COMP%]{display:flex;background:#e0e0e0;border-bottom:1px solid #ddd;overflow-x:auto}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#999;border-radius:2px}.no-tabs[_ngcontent-%COMP%]{padding:8px 12px;color:#999;font-size:13px}.tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f5f5f5;border-right:1px solid #ddd;cursor:pointer;white-space:nowrap;min-width:120px}.tab[_ngcontent-%COMP%]:hover{background:#ebebeb}.tab.active[_ngcontent-%COMP%]{background:#fff;border-bottom:2px solid #0066cc}.tab-name[_ngcontent-%COMP%]{font-size:13px;flex:1}.modified-indicator[_ngcontent-%COMP%]{color:#ff9800;margin-left:4px}.tab-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;line-height:1;cursor:pointer;color:#666;padding:0 4px}.tab-close[_ngcontent-%COMP%]:hover{color:#000;background:#ddd;border-radius:2px}.editor-container[_ngcontent-%COMP%]{flex:1;overflow:hidden;background:#fff}.editor-wrapper[_ngcontent-%COMP%]{display:flex;height:100%}.line-numbers[_ngcontent-%COMP%]{padding:12px 8px;background:#f5f5f5;border-right:1px solid #ddd;text-align:right;-webkit-user-select:none;user-select:none;color:#999;font-family:Ubuntu Mono,Courier New,monospace;min-width:50px;overflow:hidden}.line-number[_ngcontent-%COMP%]{line-height:1.5}.editor[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;outline:none;resize:none;font-family:Ubuntu Mono,Courier New,monospace;line-height:1.5;white-space:pre;overflow-wrap:normal;overflow-x:auto;tab-size:2}.editor.word-wrap[_ngcontent-%COMP%]{white-space:pre-wrap;overflow-wrap:break-word}.no-file[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:16px;color:#999}.statusbar[_ngcontent-%COMP%]{display:flex;gap:16px;padding:6px 12px;background:#f5f5f5;border-top:1px solid #ddd;font-size:12px;color:#666}.statusbar[_ngcontent-%COMP%]   .modified[_ngcontent-%COMP%]{color:#ff9800;font-weight:600}"]})};export{D as a};
